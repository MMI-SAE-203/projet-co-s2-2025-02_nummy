---
import Layout from "../layouts/Layout.astro";
import Button from "../components/Button.astro";
import imagefille from "../assets/img/image.webp";
import IconPlanet from "../assets/icones/planet.svg";
import IconBulle from "../assets/icones/bulle.svg";
import IconMap from "../assets/icones/map.svg";
import Iconfood1 from "../assets/icones/food1.svg";
import IconUser from "../assets/icones/user.svg";
import ImageSoutien from "../assets/img/cardimg/soutenir.webp";
import ImageMains from "../assets/img/cardimg/mains.webp";
import ImageRecette from "../assets/img/cardimg/pokebowl.webp";
import ImageLettre from "../assets/img/cardimg/lettre.webp";

import { Picture } from "astro:assets";

import CardLP from "../components/CardLP.astro";
---

<Layout>
  <div
    id="hero-section"
    class="bg-gradient-to-b from-[var(--color-orange)] from-40% to-[#F5B97D] to-100% w-screen pt-5 pb-25 px-8 rounded-b-[36px] transition-colors duration-1000 z-10"
  >
    <!-- Image -->
    <div
      id="image-container"
      class="w-350px h-250px flex justify-center items-center pt-15 transition-opacity duration-500"
    >
      <img
        id="hero-image"
        src={imagefille.src}
        alt="Fille avec des fruits et légumes qui sourit et tient un panier"
        class="w-100% h-100% object-contain"
        loading="eager"
      />
    </div>

    <!-- Slogan -->
    <div>
      <div class="flex items-center tracking-widest text-white pt-12 pl-2">
        <h1
          class="text-[40px]"
          style="-webkit-text-stroke: 1px var(--color-orange); color: white"
        >
          LE GOÛT DE CHEZ TOI OÙ QUE TU SOIS !
        </h1>
      </div>
      <div>
        <span class="flex h-[4px] w-30 bg-white my-5 ml-2"></span>
      </div>
      <div class="flex text-white pl-2 font-bold">
        <p class="p-body2 font-medium leading-6 pr-30">
          Plus besoin de chercher pendant des heures sur internet !
        </p>
      </div>
    </div>

    <!-- Button -->
    <div class="text-sm flex justify-center pt-8">
      <Button class="px-4" variant="vert" href="/" classes="px-10 py-3">
        DÉCOUVREZ VOS PRODUITS !
      </Button>
    </div>

    <!-- Point carousel -->
    <div id="carousel-indicators" class="flex justify-center gap-3 pt-8">
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="0">
      </div>
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="1">
      </div>
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="2">
      </div>
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="3">
      </div>
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="4">
      </div>
      <div class="w-3 h-3 rounded-full bg-white opacity-50" data-index="5">
      </div>
    </div>
  </div>

  <!-- information -->

  <div class="relative w-full">
    <div
      class="bg-[var(--color-green)] relative w-full pb-20 top-[-40px] -z-10"
    >
      <!-- CONTENU -->
      <div class="z-10 pt-20 px-6">
        <div class="w-20px h-20px">
          <IconPlanet />
        </div>

        <!-- TEXT -->
        <div class="pt-4">
          <h2 class="h2-header text-white">
            Tout les pays dans un seul lieu !
          </h2>
          <div>
            <span class="flex h-[4px] w-50 bg-[var(--color-orange)] my-5"
            ></span>
          </div>
          <p class="text-white">
            Découvrez la culture culinaire du monde entier à travers de les
            nombreuses fonctionnalités que notre site propose !
          </p>

          <!-- icones -->
          <div class="grid grid-cols-2 pt-13 -ml-2 gap-15">
            <div class="flex flex-col justify-center items-center">
              <IconBulle />
              <p class="uppercase text-center text-white pt-3">
                Partager vos opinions
              </p>
            </div>
            <div>
              <div class="flex flex-col justify-center items-center">
                <IconMap />
                <p class="uppercase text-center text-white pt-3">
                  Trouver vos boutiques favoris
                </p>
              </div>
            </div>

            <div>
              <div class="flex flex-col justify-center items-center">
                <Iconfood1 />
                <p class="uppercase text-center text-white pt-3">
                  Delicieuses recettes !
                </p>
              </div>
            </div>

            <div>
              <div class="flex flex-col justify-center items-center">
                <IconUser />
                <p class="uppercase text-center text-white pt-3">
                  Devenir<br />partenaire
                </p>
              </div>
            </div>
          </div>

          <!-- button -->
          <div class="text-sm flex justify-center pt-10">
            <Button class="pt-10" variant="lin" href="/" classes="px-10 py-3">
              DÉCOUVREZ VOS PRODUITS !
            </Button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Card section  -->
  <div>
    <div class="flex flex-col justify-center items-center text-center pt-3">
      <h2 class="h2-header uppercase">et encore plus !</h2>
      <span class="flex h-[8px] w-50 bg-[var(--color-orange)] my-5"></span>
    </div>

    <div class="flex flex-col *:my-6">
      <article class="flex place-content-end">
        <CardLP bgColor="var(--color-orange)" href="/">
          <Picture
            slot="image"
            src={ImageLettre}
            alt="Image de la carte"
            class="relative mr-250"
          />
          <span slot="title">NEWSLETTER</span>
          <span slot="description"
            >Abonnez-vous à notre newsletter pour découvrir nos nouveautés,
            offres exclusives et inspirations directement dans votre boÎte mail.</span
          >
          <div slot="button">
            <Button variant="lin" href="/">CLIQUEZ ICI</Button>
          </div>
        </CardLP>
      </article>

      <article>
        <CardLP bgColor="var(--color-orange)" href="/">
          <Picture
            slot="image"
            src={ImageMains}
            alt="Image de la carte"
            class="relative h-full"
          />
          <span slot="title">Devenir partenaire</span>
          <span slot="description"
            >Découvrez comment collaborer avec nous pour donner plus d'ampleur à
            nos projets !</span
          >
          <div slot="button">
            <Button variant="lin" href="/">CLIQUEZ ICI</Button>
          </div>
        </CardLP>
      </article>

      <CardLP bgColor="var(--color-orange)" href="/">
        <div slot="image" class="absolute inset-0 overflow-hidden">
          <Picture
            src={ImageSoutien}
            alt="Image de la carte"
            class="object-cover opacity-100"
            width={200}
            height={200}
            loading="lazy"
          />
        </div>

        <span slot="title">Nous soutenir !</span>
        <span class="pr-15" slot="description"
          >Soutenez notre projet et participez à son développement ! Chaque
          contribution compte pour nous aider à grandir !</span
        >
        <div slot="button">
          <Button variant="lin" href="/">CLIQUEZ ICI</Button>
        </div>
      </CardLP>

      <CardLP bgColor="var(--color-green)" href="/">
        <Picture
          slot="image"
          src={ImageRecette}
          alt="Image de la carte"
          class=""
        />
        <span slot="title">Recettes Ñummy!</span>
        <span slot="description"
          >Soutenez notre projet et participez à son développement ! Chaque
          contribution compte pour nous aider à grandir !</span
        >
        <div slot="button">
          <Button variant="lin" href="/">CLIQUEZ ICI</Button>
        </div>
      </CardLP>
    </div>
  </div>
</Layout>

<!-- script -->
<script>
  const backgrounds = [
    "from-[var(--color-orange)] from-40% to-[#F5B97D] to-100%",
    "from-[var(--color-rouge)] from-40% to-[var(--color-orange)] to-100%",
    "from-[var(--color-marron)] from-40% to-[#F5B97D] to-100%",
    "from-[var(--color-vert)] from-40% to-[var(--color-bleu)] to-100%",
    "from-[var(--color-bleu)] from-40% to-[var(--color-vert)] to-100%",
    "from-[var(--color-bleu-fonce)] from-40% to-[var(--color-bleu)] to-100%",
  ];

  const images = [
    "/src/assets/img/image.webp",
    "src/assets/img/imagech.webp",
    "/src/assets/img/imageA.webp",
    "/src/assets/img/imageAM.webp",
    "/src/assets/img/imageT.webp",
    "/src/assets/img/imageUE.webp",
  ];

  const section = document.getElementById("hero-section");
  const container = document.getElementById("image-container");
  const heroImage = document.getElementById("hero-image");

  let currentIndex = 0;

  function changeContent() {
    container.style.opacity = "0";

    setTimeout(() => {
      currentIndex =
        (currentIndex + 1) % Math.min(backgrounds.length, images.length);

      section.className = section.className.replace(
        /from-\[.*?\] from-40% to-\[.*?\] to-100%/,
        backgrounds[currentIndex]
      );

      heroImage.onload = () => {
        container.style.opacity = "1";
      };

      heroImage.src = images[currentIndex];

      updateIndicators();
    }, 500);
  }

  // carousel points

  function updateIndicators() {
    const dots = document.querySelectorAll("[data-index]");
    dots.forEach((dot, i) => {
      if (i === currentIndex) {
        dot.classList.add("opacity-100");
        dot.classList.remove("opacity-50");
        dot.style.backgroundColor = "var(--color-green)";
      } else {
        dot.classList.add("opacity-50");
        dot.classList.remove("opacity-100");
        dot.classList.add("bg-white");
        dot.style.backgroundColor = "white";
      }
    });
  }

  updateIndicators();

  setInterval(changeContent, 5000);

  window.addEventListener("load", () => {
    images.forEach((src) => {
      const img = new Image();
      img.src = src;
    });
  });
</script>
